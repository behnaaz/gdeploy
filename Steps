Legende:
  + : à faire
  * : fait, en test
  - : terminé

I]- FIXME/BUGS
  - hack fetch-crl sur ce.

II]- FEATURES
  + Gestion 2 nodes (un service/un wn et écrasement conf).
  + Réorganisation fct/opts pour update, et service seuls.
  + Ajout des briques lfc/se.
  + Gestion Multivo (proxy/certificats).

III]- LONG TERM
  + Gestion conf puppet/cfengine/quattor.org ?
  + Image sl 6.0/5.5 générique

IV]- TIPS
  o kernel_params : ETH_DRV=igb ETH_DEV=eth0 \
    			DISK_DRV=ahci \
    			console=tty0 console=ttyS0,38400n8

== Liens ==
- https://twiki.cern.ch/twiki/bin/view/LCG/LfcAdminGuide

== Gdeploy etapes ==
- Origin $OAR_NODE_FILE ou entrée manuelle (-m node).
- Determiner le nombre de nodes min pour expé (bdii,batch,ce,ui,lfc,wn).
- Deployer les noeuds sur sl5.
- Lancer la génération de la configuration en fonction des noeuds qu'on a.
- Certification.
- Deployer la conf sur les machines de service (site-info.def et certifs).
- Lancer les scripts en fonction de la machine visée.

== Infos ==
- subject=/C=FR/ST=Lorraine/O=Grid5000CA/CN=ca.grid5000.fr
- subject=/C=FR/ST=Lorraine/O=Grid5000/CN=*.grid5000.fr/emailAddress=sebastien.badia@inria.fr

# Tests
## Bdii
cat /opt/glite/etc/gip/site-urls.conf

source /root/yaim/site-info.def
ldapsearch -xLLL -b mds-vo-name=$SITE_NAME,o=grid -p 2170 -h $SITE_BDII_HOST
ldapsearch -xLLL -b mds-vo-name=<site name>,o=grid -p 2170 -h <site BDII hostname>

## Batch
qmgr > print server, list queue default
pbsnodes
qstat -q default
showq -q default

## Workers nodes
momctl -d 3

## Computing Element
same as batch
ldapsearch -xLLL -b mds-vo-name=<site name>,o=grid -p 2170 -h <site BDII hostname>
Boron et desc nodes

# Jobs
## On CE
### Passif
cat > test.sh  <<+
#!/bin/bash
echo "I am \`whoami\` on host \`hostname\`."
sleep 15
exit 0
+

qsub -q default test.sh

### Interactif
qsub -q default -I
qsub -q default -I -l nodes=2:ppn=2

wget http://gkswiki.fzk.de/images/4/4a/Dech_certificate.pem -O /etc/grid-security/vomsdir/glite-io.scai.fraunhofer.de.pem
cd /etc/grid-security/vomsdir/
openssl x509 -in glite-io.scai.fraunhofer.de.pem -text -noout
openssl verify -CApath /etc/grid-security/certificates/ /etc/grid-security/vomsdir/glite-io.scai.fraunhofer.de.pem
