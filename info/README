# = gDeploy
# :title: Glite Deployment on Grid'5000
#
# == Description
# gDeploy est un petit script écrit en ruby, dans le but de déployer
#  et de configurer les services de base du midleware de grilles de
#  calcul gLite.
#
# gDeploy utilise les classes ruby net/ssh,scp.
# L'environnement utilisé pour le déploiement est un système Scientific
# Linux 5.5, et la version de gLite est la 3.2
#
# Pour fonctionner gdeploy a besoin de trois tgz, il va les chercher
# directement dans le public home de sbadia.
# 	- hostkeys.tgz les certificats de la grille crée.
# 	- repo.tgz le définitions des repo gLite.
# 	- ssh-keys.tgz les clés ssh de la grille.
# Voir http://public.nancy.grid5000.fr/~sbadia/glite/ depuis g5k.
#
# == Licence
# Ce script est sous licence GPLv2.
#
# == Contacts
# - Lucas Nussbaum <lucas.nussbaum@loria.fr>
# - Sebastien Badia <sebastien.badia@inria.fr>
#
# == Liens
# - http://sbadia.github.com/gdeploy/
# - http://dev.sebian.fr/redmine/projects/gdeploy
#
# - https://www.grid5000.fr/
# - http://www.scientificlinux.org/
# - http://glite.cern.fr/


# Fichier de configuration pour un site gLite (site-inf.def) le fichier est
# sourcé par yaim pour configurer les différents services (attention donc à
# sa syntaxe bash).
# Récapitulatif des différents services en fonction des briques.
#   - Bdii, Site-Bdii, annuaire de la Vo.
#   - Batch, server torque, maui.
#   - Workers nodes on sl5.5
#   - Computing element, surcouche au batch server (proxy), cream ce.
#   - Woms avec rb ressource broker fifo.
# Attention à la racine ldap de la vo... Et des certificats associés
# <QUEUE_NAME>_GROUP_ENABLE=<list of vo>
#

## Site-info.def Batch
# Sub: O=Grid, OU=GlobusTest, OU=simpleCA-graphene-107.nancy.grid5000.fr, CN=host/graphene-107.nancy.grid5000.fr
# Issuer: O=Grid, OU=GlobusTest, OU=simpleCA-graphene-107.nancy.grid5000.fr, CN=Globus Simple CA

# Utilisateurs pour la vo de test
# 3 admin et 9 utilisateurs, en fonction du nom de la vo.
# <user_id>:<username>:<group_id>:<group_name>:<vo_name>:<special_user_type>:
#

# Groupes de la vo.
# "/<vo>"::::
# "/<vo>/<group>"::::
# "/<vo>/<group>/ROLE=<role>::::
# "/<vo>/<group>/ROLE=<role>:::<special_user_type>:
#

# == Info ==
# Premiere "boucle" ssh:
#  On passe sur tous les nœuds de la reservation, et:
#   - on cree les repertoires pour yaim
#   - on dl les repo gLite
#   - on met à jour la distri.
#  Dans un deuxieme temps on dl les fichiers de conf notamment:
#   - site-info.def la definition de la grille du site
#   - users.conf les definitions pour la creations des users
#   - groups.conf pour la creation des groupes
#   - wn-list.conf une liste de workers.
#
