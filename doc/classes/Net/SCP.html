<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Net::SCP</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Net::SCP</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/net/scp/errors_rb.html">
                net/scp/errors.rb
                </a>
        <br />
                <a href="../../files/net/scp/version_rb.html">
                net/scp/version.rb
                </a>
        <br />
                <a href="../../files/net/scp/download_rb.html">
                net/scp/download.rb
                </a>
        <br />
                <a href="../../files/net/scp/upload_rb.html">
                net/scp/upload.rb
                </a>
        <br />
                <a href="../../files/net/scp_rb.html">
                net/scp.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="SCP.html">Net::SCP</a> implements the <a href="SCP.html">SCP</a>
(Secure CoPy) client protocol, allowing Ruby programs to securely and
programmatically transfer individual files or entire directory trees to and
from remote servers. It provides support for multiple simultaneous <a
href="SCP.html">SCP</a> copies working in parallel over the same
connection, as well as for synchronous, serial copies.
</p>
<p>
Basic usage:
</p>
<pre>
  require 'net/scp'

  Net::SCP.start(&quot;remote.host&quot;, &quot;username&quot;, :password =&gt; &quot;passwd&quot;) do |scp|
    # synchronous (blocking) upload; call blocks until upload completes
    scp.upload! &quot;/local/path&quot;, &quot;/remote/path&quot;

    # asynchronous upload; call returns immediately and requires SSH
    # event loop to run
    channel = scp.upload(&quot;/local/path&quot;, &quot;/remote/path&quot;)
    channel.wait
  end
</pre>
<p>
<a href="SCP.html">Net::SCP</a> also provides an open-uri tie-in, so you
can use the Kernel#open method to open and read a remote file:
</p>
<pre>
  # if you just want to parse SCP URL's:
  require 'uri/scp'
  url = URI.parse(&quot;scp://user@remote.host/path/to/file&quot;)

  # if you want to read from a URL voa SCP:
  require 'uri/open-scp'
  puts open(&quot;scp://user@remote.host/path/to/file&quot;).read
</pre>
<p>
Lastly, <a href="SCP.html">Net::SCP</a> adds a method to the <a
href="SSH/Connection/Session.html">Net::SSH::Connection::Session</a> class,
allowing you to easily grab a <a href="SCP.html">Net::SCP</a> reference
from an existing <a href="SSH.html">Net::SSH</a> session:
</p>
<pre>
  require 'net/ssh'
  require 'net/scp'

  Net::SSH.start(&quot;remote.host&quot;, &quot;username&quot;, :password =&gt; &quot;passwd&quot;) do |ssh|
    ssh.scp.download! &quot;/remote/path&quot;, &quot;/local/path&quot;
  end
</pre>
<h2>Progress Reporting</h2>
<p>
By default, uploading and downloading proceed silently, without any outword
indication of their progress. For long running uploads or downloads (and
especially in interactive environments) it is desirable to report to the
user the progress of the current operation.
</p>
<p>
To receive progress reports for the current operation, just pass a block to
<a href="SCP.html#M000465">upload</a> or <a
href="SCP.html#M000467">download</a> (or one of their variants):
</p>
<pre>
  scp.upload!(&quot;/path/to/local&quot;, &quot;/path/to/remote&quot;) do |ch, name, sent, total|
    puts &quot;#{name}: #{sent}/#{total}&quot;
  end
</pre>
<p>
Whenever a <a href="SCP.html#M000464">new</a> chunk of data is recieved for
or sent to a file, the callback will be invoked, indicating the name of the
file (local for downloads, remote for uploads), the number of bytes that
have been sent or received so far for the file, and the size of the file.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000467">download</a>&nbsp;&nbsp;
      <a href="#M000468">download!</a>&nbsp;&nbsp;
      <a href="#M000463">download!</a>&nbsp;&nbsp;
      <a href="#M000464">new</a>&nbsp;&nbsp;
      <a href="#M000461">start</a>&nbsp;&nbsp;
      <a href="#M000465">upload</a>&nbsp;&nbsp;
      <a href="#M000462">upload!</a>&nbsp;&nbsp;
      <a href="#M000466">upload!</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="SSH/Loggable.html">Net::SSH::Loggable</a></span>
        <span class="include-name"><a href="SCP/Upload.html">Upload</a></span>
        <span class="include-name"><a href="SCP/Download.html">Download</a></span>
      </div>
    </div>

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="SCP/Download.html" class="link">Net::SCP::Download</a><br />
Module <a href="SCP/Upload.html" class="link">Net::SCP::Upload</a><br />
Class <a href="SCP/Error.html" class="link">Net::SCP::Error</a><br />
Class <a href="SCP/Version.html" class="link">Net::SCP::Version</a><br />

    </div>




    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">session</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The underlying <a href="SSH.html">Net::SSH</a> session that acts as
transport for the <a href="SCP.html">SCP</a> packets.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000463" class="method-detail">
        <a name="M000463"></a>

        <div class="method-heading">
          <a href="SCP.src/M000463.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000463.html');return false;">
          <span class="method-name">download!</span><span class="method-args">(host, username, remote, local=nil, options={}, &amp;progress)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Starts up a <a href="SCP.html#M000464">new</a> <a href="SSH.html">SSH</a>
connection using the <tt>host</tt> and <tt>username</tt> parameters,
instantiates a <a href="SCP.html#M000464">new</a> <a
href="SCP.html">SCP</a> session on top of it, and then begins a <a
href="SCP.html#M000467">download</a> from <tt>remote</tt> to
<tt>local</tt>. If the <tt>options</tt> hash includes an :ssh key, the
value for that will be passed to the <a href="SSH.html">SSH</a> connection
as options (e.g., to set the password, etc.). All other options are passed
to the <a href="SCP.html#M000467">download</a>! method. If a block is
given, it will be used to report progress (see &quot;Progress
Reporting&quot;, under <a href="SCP.html">Net::SCP</a>).
</p>
        </div>
      </div>

      <div id="method-M000464" class="method-detail">
        <a name="M000464"></a>

        <div class="method-heading">
          <a href="SCP.src/M000464.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000464.html');return false;">
          <span class="method-name">new</span><span class="method-args">(session)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="SCP.html#M000464">new</a> <a
href="SCP.html">Net::SCP</a> session on top of the given <a
href="SSH.html">Net::SSH</a> <tt>session</tt> object.
</p>
        </div>
      </div>

      <div id="method-M000461" class="method-detail">
        <a name="M000461"></a>

        <div class="method-heading">
          <a href="SCP.src/M000461.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000461.html');return false;">
          <span class="method-name">start</span><span class="method-args">(host, username, options={}) {|scp| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Starts up a <a href="SCP.html#M000464">new</a> <a href="SSH.html">SSH</a>
connection and instantiates a <a href="SCP.html#M000464">new</a> <a
href="SCP.html">SCP</a> session on top of it. If a block is given, the <a
href="SCP.html">SCP</a> session is yielded, and the <a
href="SSH.html">SSH</a> session is closed automatically when the block
terminates. If no block is given, the <a href="SCP.html">SCP</a> session is
returned.
</p>
        </div>
      </div>

      <div id="method-M000462" class="method-detail">
        <a name="M000462"></a>

        <div class="method-heading">
          <a href="SCP.src/M000462.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000462.html');return false;">
          <span class="method-name">upload!</span><span class="method-args">(host, username, local, remote, options={}, &amp;progress)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Starts up a <a href="SCP.html#M000464">new</a> <a href="SSH.html">SSH</a>
connection using the <tt>host</tt> and <tt>username</tt> parameters,
instantiates a <a href="SCP.html#M000464">new</a> <a
href="SCP.html">SCP</a> session on top of it, and then begins an <a
href="SCP.html#M000465">upload</a> from <tt>local</tt> to <tt>remote</tt>.
If the <tt>options</tt> hash includes an :ssh key, the value for that will
be passed to the <a href="SSH.html">SSH</a> connection as options (e.g., to
set the password, etc.). All other options are passed to the <a
href="SCP.html#M000465">upload</a>! method. If a block is given, it will be
used to report progress (see &quot;Progress Reporting&quot;, under <a
href="SCP.html">Net::SCP</a>).
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000467" class="method-detail">
        <a name="M000467"></a>

        <div class="method-heading">
          <a href="SCP.src/M000467.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000467.html');return false;">
          <span class="method-name">download</span><span class="method-args">(remote, local, options={}, &amp;progress)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Inititiate a synchronous (non-blocking) <a
href="SCP.html#M000467">download</a> from <tt>remote</tt> to
<tt>local</tt>. The following options are recognized:
</p>
<ul>
<li>:recursive - the <tt>remote</tt> parameter refers to a remote directory,
which should be downloaded to a <a href="SCP.html#M000464">new</a>
directory named <tt>local</tt> on the local machine.

</li>
<li>:preserve - the atime and mtime of the file should be preserved.

</li>
<li>:verbose - the process should result in verbose output on the server end
(useful for debugging).

</li>
</ul>
<p>
This method will return immediately, returning the <a
href="SSH/Connection/Channel.html">Net::SSH::Connection::Channel</a> object
that will support the <a href="SCP.html#M000467">download</a>. To wait for
the <a href="SCP.html#M000467">download</a> to finish, you can either call
the wait method on the channel, or otherwise run the <a
href="SSH.html">Net::SSH</a> event loop until the channel&#8216;s active?
method returns false.
</p>
<pre>
  channel = scp.download(&quot;/remote/path&quot;, &quot;/local/path&quot;)
  channel.wait
</pre>
        </div>
      </div>

      <div id="method-M000468" class="method-detail">
        <a name="M000468"></a>

        <div class="method-heading">
          <a href="SCP.src/M000468.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000468.html');return false;">
          <span class="method-name">download!</span><span class="method-args">(remote, local=nil, options={}, &amp;progress)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Same as <a href="SCP.html#M000467">download</a>, but blocks until the <a
href="SCP.html#M000467">download</a> finishes. Identical to calling <a
href="SCP.html#M000467">download</a> and then calling the wait method on
the channel object that is returned.
</p>
<pre>
  scp.download!(&quot;/remote/path&quot;, &quot;/local/path&quot;)
</pre>
<p>
If <tt>local</tt> is nil, and the <a href="SCP.html#M000467">download</a>
is not recursive (e.g., it is downloading only a single file), the file
will be downloaded to an in-memory buffer and the resulting string
returned.
</p>
<pre>
  data = download!(&quot;/remote/path&quot;)
</pre>
        </div>
      </div>

      <div id="method-M000465" class="method-detail">
        <a name="M000465"></a>

        <div class="method-heading">
          <a href="SCP.src/M000465.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000465.html');return false;">
          <span class="method-name">upload</span><span class="method-args">(local, remote, options={}, &amp;progress)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Inititiate a synchronous (non-blocking) <a
href="SCP.html#M000465">upload</a> from <tt>local</tt> to <tt>remote</tt>.
The following options are recognized:
</p>
<ul>
<li>:recursive - the <tt>local</tt> parameter refers to a local directory,
which should be uploaded to a <a href="SCP.html#M000464">new</a> directory
named <tt>remote</tt> on the remote server.

</li>
<li>:preserve - the atime and mtime of the file should be preserved.

</li>
<li>:verbose - the process should result in verbose output on the server end
(useful for debugging).

</li>
<li>:chunk_size - the size of each &quot;chunk&quot; that should be sent.
Defaults to 2048. Changing this value may improve throughput at the expense
of decreasing interactivity.

</li>
</ul>
<p>
This method will return immediately, returning the <a
href="SSH/Connection/Channel.html">Net::SSH::Connection::Channel</a> object
that will support the <a href="SCP.html#M000465">upload</a>. To wait for
the <a href="SCP.html#M000465">upload</a> to finish, you can either call
the wait method on the channel, or otherwise run the <a
href="SSH.html">Net::SSH</a> event loop until the channel&#8216;s active?
method returns false.
</p>
<pre>
  channel = scp.upload(&quot;/local/path&quot;, &quot;/remote/path&quot;)
  channel.wait
</pre>
        </div>
      </div>

      <div id="method-M000466" class="method-detail">
        <a name="M000466"></a>

        <div class="method-heading">
          <a href="SCP.src/M000466.html" target="Code" class="method-signature"
            onclick="popupCode('SCP.src/M000466.html');return false;">
          <span class="method-name">upload!</span><span class="method-args">(local, remote, options={}, &amp;progress)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Same as <a href="SCP.html#M000465">upload</a>, but blocks until the <a
href="SCP.html#M000465">upload</a> finishes. Identical to calling <a
href="SCP.html#M000465">upload</a> and then calling the wait method on the
channel object that is returned. The return value is not defined.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>